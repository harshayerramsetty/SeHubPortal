
@{
    ViewBag.Title = "TimeClock";
    Layout = "~/Views/Shared/_Settings.cshtml";
}


@model SeHubPortal.ViewModel.TimeClockViewModel

<html>

    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Dashboard</title>
        <meta charset="utf-8">
        @*<link rel="shortcut icon" type="image/x-icon" href="~/Content/title_logo64.png">*@
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

        @if (Model.SehubAccess.plant > 0)
        {
            <style>
                #PlantClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.tools > 0)
        {
            <style>
                #toolsClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.management > 0)
        {
            <style>
                #ManagementClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.settings_managePermissions > 0)
        {
            <style>
                #EmployeePermissionsLink {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.settings_customers > 0)
        {
            <style>
                #CustomersLink {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.settings_administration > 0)
        {
            <style>
                #AdministrationLink {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.settings_dashboard > 0)
        {
            <style>
                #SettingsLink {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.payroll > 0)
        {
            <style>
                #PayrollClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.fleetTVT > 0)
        {
            <style>
                #FleetTVTClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.treadTracker > 0)
        {
            <style>
                #treadTrackereClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.library_access > 0)
        {
            <style>
                #libraryClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.main > 0)
        {
            <style>
                #mainClicked {
                    display: block !important;
                }
            </style>
        }

        @if (Model.SehubAccess.library_access == 3)
        {
            <style>
                #libraryClicked {
                    display: block !important;
                }
            </style>
        }


        <style>
            .breadCrumb{
        background-color:white;
    }
            #TimeClockLink {
                display: block !important;
            }

            #SettingsClicked {
                display: block !important;
            }

            .settingsBtn {
                font-weight: bold;
            }

            #TimeClockLink {
                color: black;
                font-weight: 700;
                background-color: #f0f2f5;
                border-color: white;
            }

            body {
                background-color: #f0f2f5;
            }

            .card-header {
                padding: 5px;
            }

            table tr:hover {
                background: lightgray;
            }

            input[type=number]::-webkit-inner-spin-button,
            input[type=number]::-webkit-outer-spin-button {
                opacity: 1;
            }
        </style>
    </head>

    <body>

        <div class="row heading" style="padding:10px 20px 0px 15px">
            <div class="col">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb breadCrumb" style="background-color: white; height: 100%; margin-top: 0px;">
                        <li class="breadcrumb-item"><a href="@Url.Action("TimeClock", "Settings")">Settings</a></li>
                        <li class="breadcrumb-item " aria-current="page">TimeClock</li>
                    </ol>
                </nav>
            </div>
            <button type="button" id="clickThis" class="btn" style=" margin-bottom: 14px;">
                <i class="fa fa-bars" style="font-size: 25px"></i>
                <span class="sr-only">Toggle Menu</span>
            </button>
        </div>

        <div class="row">
            <div class="col-lg-12" style="padding:0px 30px 0px 30px">

                <div class="card">
                    <div class="card-header text-center" style="padding: 5px 0px 0px 0px">
                        <h4>Time Clock Devices</h4>
                    </div>
                    <div class="card-body">
                        <table class="table table-bordered">
                            <thead class="thead-dark">
                                <tr>
                                    <th style="padding:0px 0px 0px 15px; font-size:10px">Serial Number</th>
                                    <th style="padding:0px 0px 0px 15px; font-size:10px">Location ID</th>
                                    <th style="padding:0px 0px 0px 15px; font-size:10px">IP Address</th>
                                    <th style="padding:0px 0px 0px 15px; font-size:10px">Sub Location</th>
                                    <th style="padding:0px 0px 0px 15px; font-size:10px; text-align:center">Edit</th>
                                    <th style="padding:0px 0px 0px 15px; font-size:10px; text-align:center">Delete</th>
                                </tr>
                            </thead>
                            <tbody>

                                @foreach (var item in Model.Devices)
                                {
                                    <tr>
                                        <td style="padding:5px 5px 5px 15px">@item.serial_number</td>
                                        <td style="padding:5px 5px 5px 15px">@item.loc_id</td>
                                        <td style="padding:5px 5px 5px 15px">@item.ip_address</td>
                                        <td style="padding:5px 5px 5px 15px">@item.sub_loc_id</td>
                                        <td style="padding:5px 5px 5px 15px; text-align:center">
                                            <button onclick="edit(this.id)" id="@item.serial_number;@item.loc_id" data-toggle="modal" data-target="#editLoc" style="background-color:transparent;border:1px solid transparent;"><i class="fa fa-edit" style="font-size:20px;color:black;float:right"></i></button>
                                        </td>
                                        <td style="padding:5px 5px 5px 15px; text-align:center">
                                            <button onclick="delet(this.id)" id="@item.serial_number" data-toggle="modal" data-target="#deleteLoc" style="background-color:transparent;border:1px solid transparent;">
                                                <img style="width:20px" src="~/Content/trash.png" alt="Alternate Text" />
                                            </button>
                                        </td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="editLoc" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                @using (Html.BeginForm("EditTimeClock", "Settings", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <div class="modal-content">
                        <div class="modal-header" style="padding:5px 5px 5px 15px">
                            <h5 class="modal-title" id="exampleModalLongTitle">Edit</h5>
                        </div>
                        <div class="modal-body ">
                            <div class="row">
                                <div class="col-md-5 text-right">
                                    Location
                                </div>
                                <div class="col-md-7 text-left">
                                    @Html.DropDownListFor(m => m.loc, Model.locations, new { @id = "LocDropdown", @type = "text", @style = "text-align-last: center;width:150px;height:23px;font-size:15px;margin-left:6px;" })
                                </div>
                            </div>
                            <div class="row">
                                @Html.HiddenFor(m => m.serial, new { @id = "Serial", @type = "text", @style = "display:none" })
                            </div>
                        </div>
                        <div class="modal-footer" style="padding:5px">
                            <button type="button" style="padding:2px 20px 2px 20px" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                            <button type="submit" style="padding:2px 30px 2px 30px" class="btn btn-success">Save</button>
                        </div>
                    </div>
                }

            </div>
        </div>

        <div class="modal fade" id="deleteLoc" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                @using (Html.BeginForm("DeleteTimeClock", "Settings", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <div class="modal-content">
                        <div class="modal-header" style="padding:5px 5px 5px 15px">
                            <h5 class="modal-title" id="exampleModalLongTitle">Delete</h5>
                        </div>
                        <div class="modal-body ">
                            <div class="row">
                                <div class="col-lg-12 text-center">
                                    @Html.HiddenFor(m => m.serialDelete, new { @id = "DeleteSerial", @type = "text", @style = "text-align:center; outline:none; border:none" })
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer" style="padding:5px">
                            <button type="submit" style="padding:2px 20px 2px 20px" class="btn btn-success">Delete</button>
                        </div>
                    </div>
                }

            </div>
        </div>

        <script>
            function edit(value) {
                var data = value.split(';')
                $('#LocDropdown').val(data[1])
                $('#Serial').val(data[0])
            }

            function delet(value) {
                $('#DeleteSerial').val(value)
            }


        </script>

    </body>

</html>



