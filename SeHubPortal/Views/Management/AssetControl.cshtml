
@{
    ViewBag.Title = "AssetControl";
    Layout = "~/Views/Shared/_ManagementLayout.cshtml";
}

@model SeHubPortal.ViewModel.AssetControlViewModel
<html lang="en">
<head>
    <title>Vehicle Info</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>


    

    @if (Convert.ToInt32(ViewData["plant"]) > 0)
    {
        <style>
            #PlantClicked {
                display: block !important;
            }
        </style>
    }


    @if (Convert.ToInt32(ViewData["tools"]) > 0)
    {
        <style>
            #toolsClicked {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["payroll"]) > 0)
    {
        <style>
            #PayrollClicked {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["fleetTVT"]) > 0)
    {
        <style>
            #FleetTVTClicked {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["treadTracker"]) > 0)
    {
        <style>
            #treadTrackereClicked {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["library"]) > 0)
    {
        <style>
            #libraryClicked {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["main"]) > 0)
    {
        <style>
            #mainClicked {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["settings"]) > 0)
    {
        <style>
            #SettingsClicked {
                display: block !important;
            }
        </style>
    }









    @if (Convert.ToInt32(ViewData["management_dashboard"]) > 0)
    {
        <style>
            #DashboardLink {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["management_mystaff"]) > 0)
    {
        <style>
            #MyStaffLink {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["management_vacationScheduler"]) > 0)
    {
        <style>
            #LeaveSchedulerLink {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["management_attendance"]) > 0)
    {
        <style>
            #AttendanceLink {
                display: block !important;
            }
        </style>
    }

    @if (Convert.ToInt32(ViewData["employee_folder"]) > 0)
    {
        <style>
            #EmployeeFilesLink {
                display: block !important;
            }
        </style>
    }



    <style>


        #ManagementClicked {
            display: block !important;
        }

        #AssetControlLink {
            display: block !important;
        }

        #ManagementClicked {
            background-color: #f0f2f5;
            color: black;
            font-weight: 600;
        }

        #managementBtn {
            color: black;
            font-weight: 600;
        }

        #AssetControlLink {
            color: black;
            font-weight: 700;
            background-color: #f0f2f5;
        }

        body {
            background-color: #f0f2f5;
            padding-right: 0 !important;
        }

        .heading {
            margin: 10px 0px 0px 0px;
        }

            .heading h2 {
                margin-top: 8px;
            }

        .card-header {
            background-color: #cde8ca;
        }

            .card-header h6 {
                color: black;
            }

        .imageClass {
            width: 100%;
            height: 90%;
            border-radius: 10%;
        }

        .card {
            border: 1px solid #ededed;
            margin-bottom: 30px;
            border-radius: 10px;
        }

        .card {
            position: relative;
            display: -ms-flexbox;
            display: flex;
            height: 330px;
            -ms-flex-direction: column;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid rgba(0,0,0,.125);
            border-radius: .25rem;
        }

        p {
            font-size: 14px;
        }

        .dash-stats-list {
            display: flex;
            flex-flow: column wrap;
            flex-grow: 1;
            padding-left: 5px;
            background-color: #007bff;
            margin-right: 5px;
            border-radius: 10px;
            color: white;
        }

        .btn-outline-primary {
            background-color: #007bff;
            color: white;
        }

        .transcationButtons {
            width: 100px;
        }

        .example::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .example {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
    </style>
</head>
<body>
    <div class="row heading">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb" style="background-color:white;height:100%;margin-top:0px;">
                    <li class="breadcrumb-item"><a href="@Url.Action("Dashboard", "Management")">Management</a></li>
                    <li class="breadcrumb-item " aria-current="page">Asset Control</li>

                    @using (Html.BeginForm("UploadBranchShareDrive", "Library", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        <input type="text" readonly style="height:23px; width:100px; margin-left:540px" value="Add" id="AddVehicleBtn" class="btn btn-success transcationButtons" data-toggle="modal" data-target="#addModal" />

                    }
                    <label style="margin: 0px 0px 0px 210px">
                        <h6><strong>Active-Only</strong></h6>
                    </label>
                    <div class="custom-control custom-switch" style="margin: 0px 0px 0px 7px">
                        <input type="checkbox" style="width:60px; height:25px" class="custom-control-input" id="customSwitches">
                        <label class="custom-control-label" for="customSwitches">
                            <h6><strong>All</strong></h6>
                        </label>
                    </div>

                    <label style="margin: 0px 3px 0px 162px ">Location</label>

                    @using (Html.BeginForm("AssetControlChangeLocation", "Management", FormMethod.Post))
                    {
                        <div>
                            
                            @Html.DropDownListFor(m => m.MatchedLoc, Model.LocationList, new { @onChange = "this.form.submit()", @type = "text", @style = "text-align-last: center;width:100px;height:23px;font-size:15px;margin-left:6px;" })
                            <noscript> <input style="display:none" class="btn btn-success" type="submit" value="Search" /></noscript>
                        </div>
                    }

                </ol>
            </nav>
        </div>
        <button type="button" id="clickThis" class="btn" style="margin-bottom:14px;">
            <i class="fa fa-bars" style="font-size:25px"></i>
            <span class="sr-only">Toggle Menu</span>
        </button>
    </div>

    <div class="row" style="margin:0px 15px 15px 15px">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" style="color:black;width:200px;text-align:center" id="vehicle-tab" data-toggle="tab" href="#home" role="tab" aria-controls="vehicle" aria-selected="true">Vehicles</a>
            </li>
            @*s<li class="nav-item">
                    <a class="nav-link " id="profile-tab" style="color:black;width:200px;text-align:center" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Option2</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link " id="profile-tab" style="color:black;width:200px;text-align:center" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Option3</a>
                </li>*@

        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade shadow-sm show bg-white active" id="vehicle" role="tabpanel" aria-labelledby="vehicle-tab">

                <div class="card-body example" id="active_vehicles" style="display:none; height:700px; width:1640px; overflow-x:hidden; overflow-y:auto; ">
                    <!--Content tab-->

                    <div class="row people-grid-row">

                        @foreach (var vehicle in Model.VehicalInfoList)
                        {
                            if (vehicle.vehicle_status != null)
                            {
                                if (vehicle.loc_id == Model.MatchedLoc)
                                {
                                    string base64ProfilePic = "";
                                    if (@vehicle.vehicle_image is null)
                                    {
                                        base64ProfilePic = "";
                                    }
                                    else
                                    {
                                        base64ProfilePic = "data:image/png;base64," + Convert.ToBase64String(@vehicle.vehicle_image);
                                    }
                                    <div class="col-md-6 col-lg-6 col-xl-6">
                                        <div class="card shadow-sm" style="height:245px">
                                            <div class="card-body">
                                                <div class="row" style="padding-right:10px;">

                                                    <div class="col-md-5 text-center">
                                                        <div class="row">
                                                            @if (Convert.ToInt32(ViewData["management_assetControl"]) >= 3)
                                                            {
                                                                <button data-id="@vehicle.VIN" class="EditVehicleBtn" data-toggle="modal" data-target="#editVehicleModal" style="background-color:transparent;border:1px solid transparent;float:right"><i class="fa fa-edit" style="font-size:20px;color:black;float:right"></i></button>
                                                            }
                                                            else
                                                            {
                                                                <button disabled data-id="@vehicle.VIN" style="display:none; background-color:transparent;border:1px solid transparent;float:right"><i class="fa fa-edit" style="font-size:20px;color:black;float:right"></i></button>
                                                            }
                                                        </div>
                                                        <div class="row">
                                                            <a class="booking-doc-img">
                                                                @*<img src="~/Content/profilepic.jpg" alt="User Image">*@

                                                                @if (base64ProfilePic == "")
                                                                {
                                                                    <img class="imageClass" style=" width:300px; height:200px" src="~/Content/jordancar.png" alt="ProfilePic" />
                                                                }
                                                                else
                                                                {
                                                                    <img class="imageClass" style=" width:300px; height:200px" alt="profilePic" src="@base64ProfilePic" />
                                                                }

                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <text style="font-size:30px;font-weight:bold">@vehicle.vehicle_short_id </text>



                                                        <div class="row" style="margin-bottom:5px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:14px;font-style:italic">@vehicle.vehicle_long_id</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>VIN:</b> @vehicle.VIN</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>Plate:</b> @vehicle.vehicle_plate</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b> Year:</b>   @vehicle.vehicle_year</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>Manufacturer:</b>   @vehicle.vehicle_manufacturer</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:0px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>Model:</b>   @vehicle.vehicle_model</p>
                                                        </div>


                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="row" style="padding:7px; margin-bottom:10px; border-radius:10px; background-color:#357efc">
                                                            <div class="col-md-8 text-center">

                                                                @if (vehicle.current_milage.HasValue)
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        @Math.Round(@vehicle.current_milage.Value, 1).ToString("N0")
                                                                    </span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        0
                                                                    </span>
                                                                }

                                                            </div>
                                                            <div class="col-md-4 text-center" style="padding-top:10px; font-size:12px; color:white; border-left:2px solid white">
                                                                <label>KM</label>
                                                            </div>
                                                        </div>

                                                        <div class="row" style="padding:7px; margin-bottom:10px; border-radius:10px; background-color:#357efc">
                                                            <div class="col-md-8 text-center">
                                                                @if (vehicle.efficiency_price.HasValue)
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        @Math.Round(@vehicle.efficiency_price.Value, 2).ToString("N2")
                                                                    </span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        0
                                                                    </span>
                                                                }

                                                            </div>
                                                            <div class="col-md-4" style="padding-left:3px; border-left:2px solid white">
                                                                <img style="width:50px" src="~/Content/Untitled.png" alt="Alternate Text" />
                                                            </div>
                                                        </div>

                                                        <div class="row" style="padding:7px; border-radius:10px; background-color:#357efc">
                                                            <div class="col-md-8 text-center">

                                                                @if (vehicle.efficiency_liter.HasValue)
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        @Math.Round(@vehicle.efficiency_liter.Value, 3).ToString("N3")
                                                                    </span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        0
                                                                    </span>
                                                                }

                                                            </div>
                                                            <div class="col-md-4 text-center" style="padding-left:3px; border-left:2px solid white">
                                                                <img style="width:50px" src="~/Content/Untitled2.png" alt="Alternate Text" />
                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                }
                            }

                        }
                    </div>



                </div>
                <div class="card-body example" id="inactive_vehicles" style="display:none; height:700px; width:1640px; overflow-x:hidden; overflow-y:auto; ">
                    <!--Content tab-->

                    <div class="row people-grid-row">

                        @foreach (var vehicle in Model.VehicalInfoList)
                        {
                            if (vehicle.vehicle_status == 1)
                            {
                                if (vehicle.loc_id == Model.MatchedLoc)
                                {
                                    string base64ProfilePic = "";
                                    if (@vehicle.vehicle_image is null)
                                    {
                                        base64ProfilePic = "";
                                    }
                                    else
                                    {
                                        base64ProfilePic = "data:image/png;base64," + Convert.ToBase64String(@vehicle.vehicle_image);
                                    }
                                    <div class="col-md-6 col-lg-6 col-xl-6">

                                        <div class="card shadow-sm" style="height:245px">
                                            <div class="card-body">
                                                <div class="row" style="padding-right:10px;">

                                                    <div class="col-md-5 text-center">
                                                        <div class="row">
                                                            @if (Convert.ToInt32(ViewData["management_assetControl"]) >= 3)
                                                            {
                                                                <button data-id="@vehicle.VIN" class="EditVehicleBtn" data-toggle="modal" data-target="#editVehicleModal" style="background-color:transparent;border:1px solid transparent;float:right"><i class="fa fa-edit" style="font-size:20px;color:black;float:right"></i></button>
                                                            }
                                                            else
                                                            {
                                                                <button disabled data-id="@vehicle.VIN" style="display:none; background-color:transparent;border:1px solid transparent;float:right"><i class="fa fa-edit" style="font-size:20px;color:black;float:right"></i></button>
                                                            }
                                                        </div>
                                                        <div class="row">
                                                            <a class="booking-doc-img">
                                                                @*<img src="~/Content/profilepic.jpg" alt="User Image">*@

                                                                @if (base64ProfilePic == "")
                                                                {
                                                                    <img class="imageClass" style=" width:300px; height:200px" src="~/Content/jordancar.png" alt="ProfilePic" />
                                                                }
                                                                else
                                                                {
                                                                    <img class="imageClass" style=" width:300px; height:200px" alt="profilePic" src="@base64ProfilePic" />
                                                                }

                                                            </a>
                                                        </div>

                                                    </div>
                                                    <div class="col-md-4">
                                                        <text style="font-size:30px;font-weight:bold">@vehicle.vehicle_short_id </text>



                                                        <div class="row" style="margin-bottom:5px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:14px;font-style:italic">@vehicle.vehicle_long_id</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size: 17px;"><b>VIN:</b> @vehicle.VIN</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>Plate:</b> @vehicle.vehicle_plate</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b> Year:</b>   @vehicle.vehicle_year</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:1px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>Manufacturer:</b>   @vehicle.vehicle_manufacturer</p>
                                                        </div>
                                                        <div class="row" style="margin-bottom:0px;margin-left:0px;">
                                                            <p class="mb-0" style="font-size:17px;"><b>Model:</b>   @vehicle.vehicle_model</p>
                                                        </div>


                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="row" style="padding:7px; margin-bottom:10px; border-radius:10px; background-color:#357efc">
                                                            <div class="col-md-8 text-center">

                                                                @if (vehicle.current_milage.HasValue)
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        @Math.Round(@vehicle.current_milage.Value, 1).ToString("N0")
                                                                    </span>
                                                                }
                                                                else 
                                                                { 
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        0
                                                                    </span>
                                                                }

                                                            </div>
                                                            <div class="col-md-4 text-center" style="padding-top:10px; font-size:12px; color:white; border-left:2px solid white">
                                                                <label>KM</label>
                                                            </div>
                                                        </div>

                                                        <div class="row" style="padding:7px; margin-bottom:10px; border-radius:10px; background-color:#357efc">
                                                            <div class="col-md-8 text-center">

                                                                @if (vehicle.efficiency_price.HasValue)
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        @Math.Round(@vehicle.efficiency_price.Value, 2).ToString("N2")
                                                                    </span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        0
                                                                    </span>
                                                                }

                                                            </div>
                                                            <div class="col-md-4" style="padding-left:3px; border-left:2px solid white">
                                                                <img style="width:50px" src="~/Content/Untitled.png" alt="Alternate Text" />
                                                            </div>
                                                        </div>

                                                        <div class="row" style="padding:7px; border-radius:10px; background-color:#357efc">
                                                            <div class="col-md-8 text-center">

                                                                @if (vehicle.efficiency_liter.HasValue)
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        @Math.Round(@vehicle.efficiency_liter.Value, 3).ToString("N3")
                                                                    </span>
                                                                }
                                                                else
                                                                {
                                                                    <span class="btn" style="font-size:20px; color:white;">
                                                                        0
                                                                    </span>
                                                                }

                                                            </div>
                                                            <div class="col-md-4 text-center" style="padding-left:3px; border-left:2px solid white">
                                                                <img style="width:50px" src="~/Content/Untitled2.png" alt="Alternate Text" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                            }

                        }
                    </div>



                </div>
            </div>
            <div class="tab-pane fade shadow-sm bg-white" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="card-body">


                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-md-start" style="margin-left:0px; margin-bottom:20px;">


        <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div id="AddVehicleModal">

                </div>

            </div>
        </div>

        <div class="modal fade" id="editVehicleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div id="EditVehicleModalDiv">

                </div>

            </div>
        </div>

    </div>


    <script>

        $("#customSwitches").on('change', function() {
             if ($(this).is(':checked')) {
                 $('#inactive_vehicles').css('display', 'bock');
                 $('#active_vehicles').css('display', 'block');
             }
             else {
                 $('#active_vehicles').css('display', 'none');
                 $('#inactive_vehicles').css('display', 'block');
             }
         });


        $(document).ready(function () {

            $('#inactive_vehicles').css('display', 'block');

            $('#clickThis').on('click', function () {
                $('#sidebar').toggleClass('active');
            });

             $('#AddVehicleBtn').click(function () {
                    $.ajax({
                                url: '@Url.Action("AddNewVehicle", "Management")',
                                data: { value: "" },
                                type: 'GET',
                                success: function (data) {
                                    $("#AddVehicleModal").html(data);
                                }
                    });
             });


             $('.EditVehicleBtn').click(function () {
                    var id = $(this).data('id');


                    $.ajax({
                                url: '@Url.Action("EditVehicleInfo", "Management")',
                                data: { value: id },
                                type: 'GET',
                                success: function (data) {
                                    $("#EditVehicleModalDiv").html(data);
                                    $('#editVehicleModal').modal();
                                }
                    });
             });


      });

    </script>

</body>
</html>




