@model SeHubPortal.ViewModel.TreadTrackerCustomersViewModel
@{
    ViewBag.Title = "Customers";
    Layout = "~/Views/Shared/_TreadTrackerLayout.cshtml";
}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

    @if (Model.SehubAccess.plant > 0)
    {
        <style>
            #PlantClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.tools > 0)
    {
        <style>
            #toolsClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.management > 0)
    {
        <style>
            #ManagementClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.settings > 0)
    {
        <style>
            #SettingsClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.payroll > 0)
    {
        <style>
            #PayrollClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.main > 0)
    {
        <style>
            #mainClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.treadTracker > 0)
    {
        <style>
            #treadTrackereClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.library_access > 0)
    {
        <style>
            #libraryClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.fleetTVT > 0)
    {
        <style>
            #FleetTVTClicked {
                display: block !important;
            }
        </style>
    }

    @if (Model.SehubAccess.treadTracker_customers > 0)
    {
        <style>
            #CustomersLink {
                display: block !important;
            }
        </style>
    }


    <style>

        #ProductionReportLink {
            display: block !important;
        }

        #FailureAnalysisLink {
            display: block !important;
        }

        #DashboardLink {
            display: block !important;
        }

        #treadTrackereClicked {
            display: block !important;
        }

        #treadTrackereClicked {
            background-color: #f0f2f5;
            color: black;
            font-weight: 600;
        }

        #treadTrackerButton {
            color: black;
            font-weight: 600;
        }

        #CustomersLink {
            color: black;
            font-weight: 700;
            background-color: #f0f2f5;
        }

        body {
            background-color: #f0f2f5;
        }

        .heading {
            margin: 10px 0px 0px 0px;
        }

            .heading h2 {
                margin-top: 8px;
            }

        .card-header {
            background-color: #cde8ca;
        }

            .card-header h6 {
                color: black;
            }

        /* Hide scrollbar for Chrome, Safari and Opera */
        .example::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .example {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }

        .NewOrder {
            padding-top: 14%;
            padding-left: 6%;
        }

        #CustomerData {
            padding-right: 12%;
        }



        .editEmployeeModal {
            padding-right: 32%;
        }

        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body style="overflow-y: hidden; ">

    <div class="row heading">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb" style="background-color: white; height: 100%; margin-top: 0px;">
                    <li class="breadcrumb-item"><a href="@Url.Action("Dashboard", "TreadTracker")">Tread Tracker</a></li>
                    <li class="breadcrumb-item " aria-current="page">Customers</li>

                    <lable style="margin-left:1190px; margin-right:6px">
                        Location
                    </lable>
                    @Html.DropDownListFor(m => m.Location, Model.LocationList, new { @style = "width:100px; height:25px", @onchange = "changeLocation(this.value)" })
                </ol>
            </nav>
        </div>
        <button type="button" id="clickThis" class="btn" style="        margin-bottom: 14px;
">
            <i class="fa fa-bars" style="font-size: 25px "></i>
            <span class="sr-only">Toggle Menu</span>
        </button>
    </div>

    <div class="row" style="margin: 0px 15px 15px 15px">
        <div class="col-lg-4">
            <div class="row" style="background-color:white; padding:15px; height:100%">
                <div class="col-lg-12">

                    <div id="Step2">
                        <div class="row" style="margin-bottom:0px; background-color:#b6b8ba">
                            <div class="col-lg-12" style="padding:0px">
                                <div class="card" style="border:2px solid #aeafb0">
                                    <div class="card-header" style="background-color: #c0c2c4 !important; padding:0px 2px 2px 15px">
                                        <div class="row">
                                            <div class="col-lg-2" style="padding-top:3px;"></div>
                                            <div class="col-lg-8 text-center" style="padding-top:8px; padding-bottom:0px;">
                                                <h4 style="font-weight:bold; color:white">Select Customer</h4>
                                            </div>
                                            <div class="col-lg-2" style="padding-top:8px;">
                                                @if (Model.Customer != "Please Select Customer" && Model.Customer != null)
                                                {
                                                    <button data-toggle="modal" data-target="#editCustomer" class="fa fa-edit" id="myButton" style="float: right;font-size: 30px;background-color: transparent;outline: none; border: none"></button>
                                                }
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-body" style="padding:0px">

                                        <div class="row" style="margin:10px;">
                                            <div class="col-lg-12">
                                                <div class="row" style="margin-bottom:5px;">
                                                    <div class="col-lg-12">
                                                        @using (Html.BeginForm("TReadTrackerSelectedCustomer", "TreadTracker", FormMethod.Post))
                                                        {
                                                            @Html.DropDownListFor(m => m.Customer, Model.CustomerList, new { @class = "text", @style = "text-align-last: center; width:100%; height:30px", @required = "required", @id = "customer", @onchange = "this.form.submit()" })
                                                        }
                                                    </div>
                                                </div>


                                                @if (Model.Customer != null && Model.customerDetails != null)
                                                {

                                                    <div class="custDetailsRow" id="custDetailsDiv" style="font-size:13px; ">
                                                        <div class="row" style="display:none; margin-bottom:5px">
                                                            <div class="col-lg-5">
                                                                Customer Number
                                                            </div>
                                                            <div class="col-lg-7" id="Customer_Number">
                                                                @Model.customerDetails.customer_number
                                                            </div>
                                                        </div>
                                                        <div class="row" style="display:none; margin-bottom:5px">
                                                            <div class="col-lg-5">
                                                                Customer Name
                                                            </div>
                                                            <div class="col-lg-7" id="Customer_Name">
                                                                @Model.CustomerList.Where(x => x.Value == Model.Customer).Select(x => x.Text).FirstOrDefault();
                                                            </div>
                                                        </div>
                                                        <div class="row" style="margin-bottom:5px">
                                                            <div class="col-lg-5 text-right">
                                                                Reporting Contact
                                                            </div>
                                                            <div class="col-lg-7" style="padding-left:0px">
                                                                @Model.customerDetails.reporting_contact
                                                            </div>
                                                        </div>
                                                        <div class="row" style="margin-bottom:5px">
                                                            <div class="col-lg-5 text-right">
                                                                Reporting Email
                                                            </div>
                                                            <div class="col-lg-7" style="padding-left:0px; font-size:12px">
                                                                @Model.customerDetails.reporting_email
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="row" style="margin-bottom:5px">
                                                            <div class="col-lg-5 text-right">
                                                                Reporting Email
                                                            </div>
                                                            <div class="col-lg-7" style="padding-left:0px; font-size:12px">
                                                                @Model.customerDetails.default_retread
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="row" style="margin-top:10px;margin-bottom:0px;  padding:0px 10px 0px 10px">
                                                            <table class="table table-striped table-bordered">
                                                                <thead class="table-striped" style="background-color:#c0c2c4; color:white">
                                                                    <tr>
                                                                        <th style="text-align:center; font-size:10px; width:100px; padding:0px" scope="col">Casing Size</th>
                                                                        <th style="text-align:center; font-size:10px; padding:0px" scope="col">Credit</th>
                                                                        <th style="text-align:center; font-size:10px; padding:0px" scope="col">Retread</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var item in Model.CasingSizes) { 
                                                                        <tr>
                                                                            <th style="text-align:center; font-size:13px; padding:5px" scope="row">
                                                                                @item.
                                                                            </th>
                                                                            <td style="text-align:center; font-size:13px; padding:5px"></td>
                                                                            <td style="text-align:center; font-size:13px; padding:5px"></td>
                                                                        </tr>
                                                                    }

                                                                </tbody>
                                                            </table>
                                                        </div>

                                                    </div>
                                                }

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="col-lg-8 example" style="overflow-y:auto; height:720px; background-color:white; padding:15px 15px 0px 15px; padding-bottom:0px !important">

            <div class="row">
                @if (Model.WorkOrdersForCustomer != null)
                {
                    foreach (var unit in Model.WorkOrdersForCustomer)
                    {
                        <div class="col-lg-3">
                            <div class="card" style="margin-bottom:10px; padding-top:0px">
                                <div class="card-header text-center" style="background-color: #c0c2c4 !important; padding:3px 0px 0px 0px">
                                    <b>W/O @unit.WorkOrderNumber</b> <button id="@unit.WorkOrderNumber" onclick="PullUnitDetails(this)" style="float:right; background-color:transparent; border:none; outline:none" data-toggle="modal" data-target="#exampleModalLong"><img src="~/Content/Open.png" style="width:15px; margin:0px" alt="Alternate Text" /></button>
                                </div>
                                <div class="card-body" style="font-size:10px;">
                                    <div class="row">
                                        <div class="col-lg-5 text-right" style="padding-right:0px">
                                            Emp ID
                                        </div>
                                        <div class="col-lg-7 text-left">
                                            @unit.employee_Id
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-5 text-right" style="padding-right:0px">
                                            Location ID
                                        </div>
                                        <div class="col-lg-7">

                                            @unit.loc_Id

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-5 text-right" style="padding-right:0px">
                                            Creation Date
                                        </div>
                                        <div class="col-lg-7">
                                            @if (unit.creation_date.HasValue)
                                            {
                                                @unit.creation_date.Value.ToString("dd-MMM-yyyy")
                                            }
                                        </div>
                                    </div>

                                    <div class="row" style="margin-top:10px;margin-bottom:0px;  padding:0px 10px 0px 10px">
                                        <table class="table table-striped table-bordered">
                                            <thead style="background-color:#c0c2c4; color:white">
                                                <tr>
                                                    <th style="text-align:center; font-size:10px; width:100px; padding:0px" scope="col">Complete</th>
                                                    <th style="text-align:center; font-size:10px; padding:0px" scope="col">In-Progress</th>
                                                    <th style="text-align:center; font-size:10px; padding:0px" scope="col">Fail</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <tr>
                                                    <th style="text-align:center; font-size:13px; padding:5px" scope="row">@unit.closedBarcodes</th>
                                                    <td style="text-align:center; font-size:13px; padding:5px">@unit.openBarcodes</td>
                                                    <td style="text-align:center; font-size:13px; padding:5px">@unit.failedBarcodes</td>
                                                </tr>


                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
                    }
                }
            </div>

        </div>
    </div>


    <!-- Modal -->
    <div class="modal fade editEmployeeModal" data-backdrop="static" data-keyboard="false" id="editEmployeeModalOpen" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog  modal-lg" role="document">
            <div class="modal-content" style="width:1415px;">

                <div class="modal-body" style="padding:0px">
                    <div id="EditEmployeeModalDivOpen">

                    </div>
                </div>
            </div>

        </div>
    </div>



    <script>

        $("#Type").change(function () {
            var Type = document.getElementById("Type").value;

            if (Type == "Tractor") {
                $('.Trailer').css("display", "none");
                $('.Tractor').css("display", "block");
            }
            if (Type == "Trailer") {
                $('.Tractor').css("display", "none");
                $('.Trailer').css("display", "block");
            }
        });


        $(document).ready(function () {
            $('#clickThis').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
        });



    </script>

    <script>

        function PullUnitDetails(emel) {
            $.ajax({
                url: '@Url.Action("ViewOrder", "TreadTracker")', //ViewOrder
                data: {orderNumber: emel.id },
                type: 'GET',
                success: function (data) {
                    $("#EditEmployeeModalDivOpen").html(data);
                    $("#editEmployeeModalOpen").modal();
                }
            });

        }


    </script>


</body>
</html>

