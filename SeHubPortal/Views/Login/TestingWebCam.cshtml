
@{
	Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Live Web Cam - Image Capture</title>
	<link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
</head>
<body class="container">
	<div class="col-md-6" style="padding-top:50px;">
		<div class="panel panel-default">
			<div class="panel-heading">Live Web Camera</div>
			<div class="panel-body">
				<div id="LiveCamera" style="margin-bottom:50px;"></div>
				<form>
					<input type="button" class="btn btn-primary" value="Capture Snapshot" onClick="CaptureSnapshot()">
				</form>

			</div>
		</div>
	</div>
	<div class="col-md-6" style="padding-top:50px;">
		<div class="panel panel-default">
			<div class="panel-heading">Captured Snapshot/Image</div>
			<div class="panel-body">
				<div id="results">Your snapshot will appear here...</div>
			</div>
			<br />
			<br />
		</div>
	</div>

	<!-- Include the necessary libraries -->
	<script src="https://unpkg.com/quagga/dist/quagga.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.25/webcam.min.js"></script>

	<!-- Set up the webcam and attach it to the HTML element -->
	<script language="JavaScript">
		Webcam.set({
			width: 500,
			height: 375,
			image_format: 'png',
			jpeg_quality: 100
		});
		Webcam.attach('#LiveCamera');
	</script>

	<!-- Set up the Quagga barcode scanner -->
	<script language="JavaScript">
		Quagga.init({
			inputStream: {
				name: "Live",
				type: "LiveStream",
				target: document.querySelector('#LiveCamera')
			},
			decoder: {
				readers: ["ean_reader"] // Use the EAN reader
			}
		}, function (err) {
			if (err) {
				console.log(err);
				return
			}
			Quagga.start();
		});

		Quagga.onDetected(function (result) {
			alert("Barcode detected: " + result.codeResult.code);
		});
	</script>

	<!-- Capture snapshot and display results -->
	<script language="JavaScript">
		function CaptureSnapshot() {
			Webcam.snap(function (data) {
				document.getElementById('results').innerHTML = '<img src="' + data + '"/>';
			});
		}
	</script>


</body>
</html>

