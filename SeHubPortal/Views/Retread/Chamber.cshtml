@model SeHubPortal.ViewModel.PlantViewModel
@{
    ViewBag.Title = "Chamber";
    Layout = null;
}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <style>

        #DashboardLink {
            display: block !important;
        }

        #PlantClicked {
            display: block !important;
        }


        #PlantBtn {
            font-weight: bold;
        }

        #PlantClicked {
            background-color: #f0f2f5;
            color: black;
            font-weight: 600;
        }

        #DashboardLink {
            color: black;
            font-weight: 700;
            background-color: #f0f2f5;
        }

        body {
            background-color: #f0f2f5;
            padding: 0px !important;
            margin: 0px !important;
        }

        .card-header h6 {
            color: black;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .example {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }

        .raphael-group-lVBmqXpj {
            display: none !important;
        }

                /* Hide scrollbar for Chrome, Safari and Opera */
        .example::-webkit-scrollbar {
          display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .example {
          -ms-overflow-style: none;  /* IE and Edge */
          scrollbar-width: none;  /* Firefox */
        }

    </style>

    <style type="text/css">
        [pointer-events="bounding-box"] {
    display: none
}
    </style>

</head>
<body class="example" style="overflow-y:auto; overflow-x:hidden">

    <div class="row">
        <div class="col-md-12">
            <div class="row" style="padding:10px 30px 10px 30px">
                <div class="col-md-4" style="padding:10px 10px 10px 20px; background-color:white; vertical-align:middle">
                    <a href="@Url.Action("Plant", "Retread")">Retread Plant</a> / Chamber
                </div>
                <div class="col-md-4" style="background-color:white; vertical-align:middle">
                </div>
                <div class="col-md-4" style="background-color:white; vertical-align:middle">
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="row" style="padding:10px 0px 10px 30px; height:100%">
                        <div class="col-md-12" style="height:100%; border:2px solid #8a8888; border-radius:15px; background-color:white; height:100%">

                            <div class="row">
                                <div class="col-md-12" style="display:flex; justify-content:space-between; padding-top:10px">
                                    <div style="font-weight:bold; font-size:20px">Production</div>
                                    <div style="display:flex; justify-content:center; align-items:center;">
                                        <div class="custom-control custom-switch">
                                            <label style="margin-right:40px; margin-left:0px; font-weight:normal">
                                                ON
                                            </label>
                                            <input type="checkbox" onchange="$('#report').css('display', 'block'); $('#audit').css('display', 'none'); $('#ToggleFromReportToAudit').prop('checked', false);" checked style="height:15px" class="custom-control-input" id="ToggleFromAuditToReport">
                                            <label class="custom-control-label" for="ToggleFromAuditToReport" style="font-weight:bold">
                                                OFF
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12" style="display:flex; justify-content:space-between; padding-top:10px">
                                    <div style="font-weight:bold; font-size:20px">Production ID</div>
                                    <div style="font-weight:bold; font-size:20px">20221102_1</div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12" style="display:flex; justify-content:space-between; padding-top:35px; padding-bottom:10px">
                                    <div></div>
                                    <div><button class="btn btn-primary" style="padding:2px 30px; font-weight:bold">Clear</button></div>
                                </div>
                            </div>
                            

                            <table id="FuelLogTable" class="table table-striped table-bordered">
                                <thead style="background-color:#545557; color:white">
                                    <tr>
                                        <th style="text-align:center; font-size:10px; padding:0px" scope="col">Position</th>
                                        <th style="text-align:center; font-size:10px; padding:0px" scope="col">Employee ID</th>
                                        <th style="text-align:center; font-size:10px; padding:0px" scope="col">Size</th>
                                        <th style="text-align:center; font-size:10px; padding:0px" scope="col">Tread</th>
                                    </tr>
                                </thead>
                                <tbody style="background-color:white">
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>
                                        <td style="text-align:center; font-size:12px; padding:0px; vertical-align:middle" scope="col">
                                            <span style="visibility:hidden">1</span>
                                        </td>

                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="row" style="padding:10px 30px 10px 20px">
                        <div class="col-md-12" style="border:2px solid #8a8888; border-radius:15px; background-color:white; height:100%">
                            <div class="row" style="display:flex; justify-content:space-evenly">
                                @foreach (var senser in Model.chamberSensors.Where(x => x.senser.Contains("Pressure")))
                                {
                                    <div id=@senser.name></div>
                                }
                            </div>
                        </div>
                    </div>

                    <div class="row" style="padding:10px 30px 10px 20px">
                        <div class="col-md-12" style="        border: 2px solid #8a8888;
        border-radius: 15px;
        background-color: white;
        height: 100%">
                            <div class="row" style="display:flex; justify-content:space-evenly">
                                @foreach (var senser in Model.chamberSensors.Where(x => x.senser.Contains("Temperature")))
                                {
                                    <div id=@senser.name></div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            

            <div class="row" style="padding:10px 30px 10px 30px">
                <div class="col-md-12" style="border:2px solid #8a8888; border-radius:15px; background-color:white; padding:20px; height:100%">
                    <div class="row">
                        <div class="commonClass pre1" id="chart-container_5_pressure_1"></div>
                    </div>
                    <div class="row">
                        <div class="commonClass temp1" id="chart-container_5_temperature_1"></div>
                    </div>
                </div>
            </div>



        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/epoch/js/ZeroClipboard.min.js"></script>

    <script>
        $(document).ready(function () {

            var activePressureCount = @Model.chamberSensors.Where(x => x.senser.Contains("Pressure")).Count();
            var activeTemperatureCount = @Model.chamberSensors.Where(x => x.senser.Contains("Temperature")).Count();
            var Pressurewidth = 100 / (activePressureCount)
            var Temperaturewidth = 100 / (activeTemperatureCount)

            var PressurewidthPerventage = Pressurewidth-2 + "%"
            var TemperaturewidthPerventage = Temperaturewidth-2 + "%"

            $.ajax({
                url: '@Url.Action("GetActiveSensors", "Retread")',
                data: { value: "Pressure" },
                type: 'POST',
                async: false,
                success: function (data) {
                    var Array = data.split(",");
                    $.each(Array, function (index, value) {
                        FusionCharts.ready(function() {
                           new FusionCharts({
                              type: "angulargauge",
                              renderAt: value,
                              width: PressurewidthPerventage,
                              dataFormat: "json",
                              dataSource: {
                                 chart: {
                                    caption: value,
                                    theme: "fusion",
                                    showValue: "1"
                                 },
                                 colorRange: {
                                    color: [
                                       {
                                          minValue: "0",
                                          maxValue: "50",
                                          code: "#62B58F"
                                       },
                                       {
                                          minValue: "50",
                                          maxValue: "100",
                                          code: "#FFC533"
                                       },
                                       {
                                          minValue: "100",
                                          maxValue: "150",
                                          code: "#F2726F"
                                       }
                                    ]
                                 },
                                 dials: {
                                    dial: [
                                       {
                                          value: "0",
                                          toolText: "<b>$dataValue metric tonnes</b>"
                                       }
                                    ]
                                 }
                              },
                              events: {
                                 initialized: function(evt, args) {
                                    var chartRef = evt.sender;
                                    function addLeadingZero(num) {
                                       return num <= 9 ? "0" + num : num;
                                    }

                                      function updateData() {

                                          $.ajax({
                                              url: '@Url.Action("GetPressureValue", "Retread")',
                                              data: { val: value.split("_")[1] },
                                              type: 'POST',
                                              async: false,
                                              success: function (data) {
                                                  var val = parseFloat(data),
                                                  strData = "&value=" + val + "&toolText=<b>" + val + " psi</b>";
                                                  chartRef.feedData(strData);
                                              }
                                          });

                                      }

                                    chartRef.intervalUpdateId = setInterval(updateData, 500);
                                 },

                                 disposed: function(evt, args) {
                                    clearInterval(evt.sender.intervalUpdateId);
                                 }
                              }
                           }).render();
                        });
                    });
                }
            });

            $.ajax({
                url: '@Url.Action("GetActiveSensors", "Retread")',
                data: { value: "Temperature" },
                type: 'POST',
                async: false,
                success: function (data) {
                    var Array = data.split(",");
                    $.each(Array, function (index, value) {
                        FusionCharts.ready(function () {
                            var chart = new FusionCharts({
                                type: 'thermometer',
                                renderAt: value,
                                id: 'myThm'+value.split('_')[1],
                                width: TemperaturewidthPerventage,
                                dataFormat: 'json',
                                dataSource: {
                                    "chart": {
                                        "theme": "fusion",
                                        "caption": value,
                                        "lowerLimit": "0",
                                        "upperLimit": "40",
                                        "numberSuffix": "°C",
                                        "decimals": "1",
                                        "thmFillColor": "#008ee4",
                                        "thmOriginX": "100",

                                        //Add hover effect
                                        "showhovereffect": "1",
                                        "plotFillHoverColor": "ff0000",
                                        "theme": "fusion"
                                    },
                                    "value": "0"
                                },
                                "events": {
                                    "initialized": function (evt, arg) {
                                        var dataUpdate = setInterval(function () {
                                            var datavalue;

                                            $.ajax({
                                                url: '@Url.Action("GetTemperatureValue", "Retread")',
                                                data: { val: value.split('_')[1] },
                                                type: 'POST',
                                                async: false,
                                                success: function (data) {
                                                    datavalue = parseFloat(data);
                                                }
                                            });

                                            FusionCharts.items["myThm"+value.split('_')[1]].feedData("&value=" + datavalue);
                                        }, 5000);
                                    }
                                }
                            })
                            .render();
                        });
                    });
                }
            });



            FusionCharts.ready(function () {

                var pressureDataset = []

                $.ajax({
                    url: '@Url.Action("GetActiveSensors", "Retread")',
                    data: { value: "Pressure" },
                    type: 'POST',
                    async: false,
                    success: function (data) {
                        var Array = data.split(",");
                        $.each(Array, function (index, value) {
                            let senser = { seriesname: value, data: [{}] };
                            pressureDataset.push(senser);
                        });
                    }
                });                

              var stockPriceChart = new FusionCharts({
                  id: "pressureRealTimeChart",
                  type: 'realtimeline',
                  renderAt: 'chart-container_5_pressure_1',
                  width: '98%',
                  height: '400',
                  dataFormat: 'json',
                  dataSource: {
                    "chart": {
                      "caption": "Pressure",
                      "captionFontSize": "30",
                      "captionFontColor": "#028bed",
                      "captionFontBold": "1",
                      "yAxisName": "Pressure",
                      "numberSuffix": " PSI", //°C
                      "refreshinterval": "0.1",
                      "numdisplaysets": "50",
                      "labeldisplay": "rotate",
                      "showRealTimeValue": "0",
                      "theme": "fusion",
                      "legendPosition": "top-right",
                      "legendAllowDrag": "1",
                      "captionPosition": "top-left"
                    },
                    "categories": [{
                      "category": [{}]
                    }],
                    "dataset": pressureDataset
                  },
                  "events": {
                    "initialized": function(e) {
                      function addLeadingZero(num) {
                        return (num <= 9) ? ("0" + num) : num;
                      }

                          function updateData() {
                              $.ajax({
                                  url: '@Url.Action("GetAllPressureValue", "Retread")',
                                  type: 'POST',
                                  async: false,
                                  success: function (data) {
                                      var arr = data.split(';');
                                      var chartRef = FusionCharts("pressureRealTimeChart"),
                                      // We need to create a querystring format incremental update, containing
                                      // label in hh:mm:ss format
                                      // and a value (random).
                                      currDate = new Date(),
                                      label = addLeadingZero(currDate.getHours()) + ":" +
                                      addLeadingZero(currDate.getMinutes()) + ":" +
                                      addLeadingZero(currDate.getSeconds()),
                                      // Get random number between 35.25 & 35.75 - rounded to 2 decimal places
                                      randomValue = parseFloat(arr[0]),
                                      randomValue1 = parseFloat(arr[1]),
                                      randomValue2 = parseFloat(arr[2]),
                                      // Build Data String in format &label=...&value=...
                                      strData = "&label=" + label + "&value=" + randomValue + "|" + randomValue1 + "|" + randomValue2;
                                    // Feed it to chart.
                                    chartRef.feedData(strData);

                                  }
                              });
                          }

                      var myVar = setInterval(function() {
                        updateData();
                      }, 5000);
                    }
                  }
                })
                .render();
            });

            FusionCharts.ready(function () {

                var TemperatureDataset = []

                $.ajax({
                    url: '@Url.Action("GetActiveSensors", "Retread")',
                    data: { value: "Temperature" },
                    type: 'POST',
                    async: false,
                    success: function (data) {
                        var Array = data.split(",");
                        $.each(Array, function (index, value) {
                            let senser = { seriesname: value, data: [{}] };
                            TemperatureDataset.push(senser);
                        });
                    }
                });

              var stockPriceChart = new FusionCharts({
                  id: "temperatureRealTimeChart",
                  type: 'realtimeline',
                  renderAt: 'chart-container_5_temperature_1',
                  width: '98%',
                  height: '300',
                  dataFormat: 'json',
                  dataSource: {
                    "chart": {
                      "caption": "Temperature",
                      "captionFontSize": "30",
                      "captionFontColor": "#028bed",
                      "captionFontBold": "1",
                      "yAxisName": "Temperature",
                      "numberSuffix": " °C",
                      "refreshinterval": "0.1",
                      "numdisplaysets": "50",
                      "labeldisplay": "rotate",
                      "showRealTimeValue": "0",
                      "theme": "fusion",
                      "legendPosition": "bottom-right",
                      "legendAllowDrag": "1",
                      "captionPosition": "bottom-left"
                    },
                    "categories": [{
                      "category": [{}]
                    }],
                      "dataset": TemperatureDataset
                  },
                  "events": {
                    "initialized": function(e) {
                      function addLeadingZero(num) {
                        return (num <= 9) ? ("0" + num) : num;
                      }

                          function updateData() {
                              $.ajax({
                                  url: '@Url.Action("GetAllTemperatureValue", "Retread")',
                                  type: 'POST',
                                  async: false,
                                  success: function (data) {
                                      var arr = data.split(';');
                                      strData = "&label=" + "" + "&value="

                                      $.each(arr, function (index, value) {
                                          strData = strData + parseFloat(value) + "|"
                                      });

                                      var chartRef = FusionCharts("temperatureRealTimeChart")
                                    chartRef.feedData(strData);
                                  }
                              });
                          }

                      var myVar = setInterval(function() {
                        updateData();
                      }, 5000);
                    }
                  }
                })
                .render();
            });

        });
    </script>

</body>
</html>
